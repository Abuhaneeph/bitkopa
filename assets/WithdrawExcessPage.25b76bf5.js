import{a as b,Q as z}from"./QMarkupTable.c094867a.js";import{Q as _}from"./QPage.86042b36.js";import{_ as R,a3 as D,k as E,r as T,n as i,a9 as f,p,q as t,ac as m,ab as h,t as n,s as e,aa as L,a6 as u,u as l,v as o,a5 as w,a4 as x,O as S,a8 as C,a0 as Q,ad as $}from"./index.fec27aec.js";import{Q as A}from"./QSpace.44fdfa77.js";import{Q as k,b as r,a as d}from"./QItemLabel.144b2067.js";import{Q as v}from"./QList.cc32542e.js";import{Q as q}from"./QBtnDropdown.876500a7.js";import{Q as I,a as y,b as V}from"./QStepper.707f02df.js";import{Q as g}from"./touch.2b4a2049.js";import{C as B}from"./ClosePopup.02799101.js";import{u as F}from"./bitkopaStore.15472973.js";import"./selection.185e2d33.js";import"./QSlideTransition.e3eb4f2f.js";import"./use-panel.c109e320.js";import"./axios.16b9abd7.js";const N=D({setup(){const a=F();return E(()=>{a.stopListener()}),{bitkopaStore:a,step:T(1)}}}),P={class:"q-pa-xs row justify-center"},U={class:"col-10 q-pt-xl q-mt-xl"},j={class:"q-pa-md"},Y={class:"text-left",style:{width:"150px"}},O={class:"text-right"},W={class:"text-right"},G={class:"text-right"},H={class:"text-right"},J={class:"text-right"},K={class:"text-left"},X={class:"text-right"},Z={class:"text-right"},ee={class:"text-right"},te={class:"text-right"},ae={class:"text-right"},le={class:"gt-md q-pa-xs row justify-center"},oe={key:0,class:"col-12 col-md-6 q-pt-xl q-mt-xl q-px-md"},ne={class:"row items-center no-wrap"},se={class:"text-center"},ie={class:"row items-center no-wrap"},de={class:"text-center"},re={key:1,class:"col-12 col-md-6 q-pt-xl q-mt-xl q-px-md text-dark"},pe={class:"lt-lg q-pa-xs row justify-center"},ue={key:0,class:"col-12 col-md-9 q-pt-md q-mt-xs q-px-md"},ce={class:"row items-center no-wrap"},me={class:"text-center"},be={class:"row items-center no-wrap"},ke={class:"text-center"},fe={key:1,class:"col-12 col-md-6 q-pt-xl q-mt-xl q-px-md text-dark"};function ge(a,c,ye,he,xe,Se){return i(),f(h,null,[!a.bitkopaStore.connected||!a.bitkopaStore.verified?(i(),p(_,{key:0},{default:t(()=>[n("div",P,[n("div",U,[n("div",j,[e(z,null,{default:t(()=>[n("thead",null,[n("tr",null,[n("th",Y,[e(b,{animation:"blink",type:"text"})]),n("th",O,[e(b,{animation:"blink",type:"text"})]),n("th",W,[e(b,{animation:"blink",type:"text"})]),n("th",G,[e(b,{animation:"blink",type:"text"})]),n("th",H,[e(b,{animation:"blink",type:"text"})]),n("th",J,[e(b,{animation:"blink",type:"text"})])])]),n("tbody",null,[(i(),f(h,null,L(5,s=>n("tr",{key:s},[n("td",K,[e(b,{animation:"blink",type:"text",width:"85px"})]),n("td",X,[e(b,{animation:"blink",type:"text",width:"50px"})]),n("td",Z,[e(b,{animation:"blink",type:"text",width:"35px"})]),n("td",ee,[e(b,{animation:"blink",type:"text",width:"65px"})]),n("td",te,[e(b,{animation:"blink",type:"text",width:"25px"})]),n("td",ae,[e(b,{animation:"blink",type:"text",width:"85px"})])])),64))])]),_:1})])])])]),_:1})):m("",!0),a.bitkopaStore.connected&&a.bitkopaStore.verified?(i(),p(_,{key:1},{default:t(()=>[n("div",le,[a.bitkopaStore.loans.active.length?(i(),f("div",oe,[e(V,{modelValue:a.step,"onUpdate:modelValue":c[3]||(c[3]=s=>a.step=s),ref:"stepper",color:"primary",animated:""},{navigation:t(()=>[e(I,null,{default:t(()=>[a.step===3&&a.bitkopaStore.excessCollateralAmount>0?(i(),p(u,{key:0,onClick:a.bitkopaStore.withdrawExcessCollateral,color:"indigo",outline:"",label:"Submit"},null,8,["onClick"])):m("",!0),a.step===1||a.step===2&&a.bitkopaStore.excessCollateralAmount>0?(i(),p(u,{key:1,onClick:c[1]||(c[1]=s=>a.$refs.stepper.next()),color:"indigo",outline:"",label:"Continue"})):m("",!0),a.step>1?(i(),p(u,{key:2,flat:"",color:"secondary",onClick:c[2]||(c[2]=s=>a.$refs.stepper.previous()),label:"Back",class:"q-ml-sm"})):m("",!0)]),_:1})]),message:t(()=>[a.step===1?(i(),p(g,{key:0,class:"bg-indigo text-white q-px-lg"},{default:t(()=>[l(" Managing Active Loan: "+o(a.bitkopaStore.selectedLoan.loanId),1)]),_:1})):a.step===2?(i(),p(g,{key:1,class:"bg-indigo text-white q-px-lg"},{default:t(()=>[l(" Excess Collateral: "+o(a.bitkopaStore.selectedLoan.excessCollateral)+" "+o(a.bitkopaStore.selectedLoan.symbol),1)]),_:1})):a.step===3?(i(),p(g,{key:2,class:"bg-indigo text-white q-px-lg"},{default:t(()=>[l(" A pop will appear in your wallet ")]),_:1})):m("",!0)]),default:t(()=>[e(y,{name:1,title:"Select Loan",icon:"payments",done:a.step>1,style:{"min-height":"200px"}},{default:t(()=>[e(w,{class:"section-1"},{default:t(()=>[e(x,null,{default:t(()=>[e(q,{split:"",color:"dark",flat:"","no-caps":""},{label:t(()=>[n("div",ne,[e(S,{left:"",name:`img:tokens/${a.bitkopaStore.selectedLoan.icon}`},null,8,["name"]),n("div",se,[e(A),l(o(a.bitkopaStore.selectedLoan.loanId),1)])])]),default:t(()=>[(i(!0),f(h,null,L(a.bitkopaStore.loans.active,s=>(i(),p(v,{key:s.loanId},{default:t(()=>[Q((i(),p(k,{clickable:"",onClick:M=>a.bitkopaStore.changeSelectedLoan(s)},{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e($,{icon:`img:tokens/${s.icon}`,color:"white","text-color":"white"},null,8,["icon"])]),_:2},1024),e(r,null,{default:t(()=>[e(d,null,{default:t(()=>[l("Collateral: "+o(s.symbol),1)]),_:2},1024),e(d,{caption:""},{default:t(()=>[l("Loan Balance: "+o(s.balance)+" "+o(a.bitkopaStore.paymentMethods[s.paymentMethodId-1].symbol),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[B]])]),_:2},1024))),128))]),_:1})]),_:1}),e(x,null,{default:t(()=>[e(u,{style:{"pointer-events":"none"},icon:"details",size:"15px",flat:"",class:"text-dark q-ml-lg q-px-xl",rounded:"",color:"indigo",label:"Loan Details For Selected Loan","no-caps":""}),e(v,null,{default:t(()=>[e(k,null,{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(u,{style:{"pointer-events":"none"},icon:`img:countries/${a.bitkopaStore.paymentMethods[a.bitkopaStore.selectedLoan.paymentMethodId-1].currencyIcon}`,size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Loan Balance","no-caps":""},null,8,["icon"])]),_:1}),e(r,{side:""},{default:t(()=>[e(d,{class:"text-bold q-px-xl"},{default:t(()=>[l("Balance Remaining ")]),_:1}),e(d,{overline:"",class:"q-px-xl"},{default:t(()=>[l(o(parseInt(a.bitkopaStore.selectedLoan.balance).toLocaleString())+" "+o(a.bitkopaStore.paymentMethods[a.bitkopaStore.selectedLoan.paymentMethodId-1].symbol),1)]),_:1})]),_:1})]),_:1}),e(k,null,{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(u,{style:{"pointer-events":"none"},icon:"av_timer",size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Duration Remaining","no-caps":""})]),_:1}),e(r,{side:""},{default:t(()=>[e(d,{class:"text-bold q-px-sm"},{default:t(()=>[l("Time Remaining")]),_:1}),e(d,{overline:"",class:"q-px-sm"},{default:t(()=>[l(o(a.bitkopaStore.selectedLoan.countdown),1)]),_:1})]),_:1})]),_:1}),e(k,null,{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(u,{style:{"pointer-events":"none"},icon:`img:tokens/${a.bitkopaStore.selectedLoan.icon}`,size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Collateral Amount","no-caps":""},null,8,["icon"])]),_:1}),e(r,{side:""},{default:t(()=>[e(d,{class:"q-px-md text-bold"},{default:t(()=>[l("Collateral supplied")]),_:1}),e(d,{overline:"",class:"q-px-md"},{default:t(()=>[l(o(parseFloat(a.bitkopaStore.selectedLoan.collateralAmount/10**a.bitkopaStore.selectedLoan.decimals).toFixed(6))+" "+o(a.bitkopaStore.selectedLoan.symbol),1)]),_:1})]),_:1})]),_:1}),e(k,null,{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(u,{style:{"pointer-events":"none"},icon:"warning",size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Liquidation Risk","no-caps":""})]),_:1}),e(r,{side:""},{default:t(()=>[e(d,{class:"q-px-lg q-ml-xs text-bold"},{default:t(()=>[l("LTV")]),_:1}),e(d,{overline:"",class:"q-px-lg"},{default:t(()=>[l(o(a.bitkopaStore.selectedLoan.ltv)+"%",1)]),_:1})]),_:1}),e(r,{side:""},{default:t(()=>[e(d,{class:"text-bold q-px-xs"},{default:t(()=>[l("Liquidation Price")]),_:1}),e(d,{overline:"",class:"q-px-xs"},{default:t(()=>[l(o(a.bitkopaStore.selectedLoan.liquidationPrice)+" USD",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["done"]),e(y,{name:2,title:"Excess Collateral Amount",icon:"payments",done:a.step>2,style:{"min-height":"200px"}},{default:t(()=>[e(C,{outlined:"",modelValue:a.bitkopaStore.excessCollateralAmount,"onUpdate:modelValue":c[0]||(c[0]=s=>a.bitkopaStore.excessCollateralAmount=s),"label-color":"dark",label:"Collateral Amount","input-class":"text-dark text-bold text-h6",clearable:"","stack-label":"",dense:a.dense},{append:t(()=>[e(q,{split:"",color:"dark",style:{"pointer-events":"none"},flat:"","no-caps":""},{label:t(()=>[n("div",ie,[e(S,{left:"",name:`img:tokens/${a.bitkopaStore.selectedLoan.icon}`},null,8,["name"]),n("div",de,o(a.bitkopaStore.selectedLoan.symbol),1)])]),_:1})]),_:1},8,["modelValue","dense"])]),_:1},8,["done"]),e(y,{name:3,title:"Submit Transaction",icon:"assignment",style:{"min-height":"200px"}},{default:t(()=>[l(" Complete the transaction with your wallet. ")]),_:1})]),_:1},8,["modelValue"])])):m("",!0),a.bitkopaStore.loans.active.length?m("",!0):(i(),f("div",re,[e(g,{"inline-actions":"",rounded:"",class:"bg-white text-dark"},{action:t(()=>[e(u,{outline:"",align:"right",color:"indigo",to:"/request",label:"Request Loan Now"})]),default:t(()=>[l(" You currently don't have any active loans. ")]),_:1})]))]),n("div",pe,[a.bitkopaStore.loans.active.length?(i(),f("div",ue,[e(V,{modelValue:a.step,"onUpdate:modelValue":c[7]||(c[7]=s=>a.step=s),ref:"stepper",color:"primary",animated:""},{navigation:t(()=>[e(I,null,{default:t(()=>[a.step===3&&a.bitkopaStore.excessCollateralAmount>0?(i(),p(u,{key:0,onClick:a.bitkopaStore.withdrawExcessCollateral,color:"indigo",outline:"",label:"Submit"},null,8,["onClick"])):m("",!0),a.step===1||a.step===2&&a.bitkopaStore.excessCollateralAmount>0?(i(),p(u,{key:1,onClick:c[5]||(c[5]=s=>a.$refs.stepper.next()),color:"indigo",outline:"",label:"Continue"})):m("",!0),a.step>1?(i(),p(u,{key:2,flat:"",color:"secondary",onClick:c[6]||(c[6]=s=>a.$refs.stepper.previous()),label:"Back",class:"q-ml-sm"})):m("",!0)]),_:1})]),message:t(()=>[a.step===1?(i(),p(g,{key:0,class:"bg-indigo text-white q-px-lg"},{default:t(()=>[l(" Managing Active Loan: "+o(a.bitkopaStore.selectedLoan.loanId),1)]),_:1})):a.step===2?(i(),p(g,{key:1,class:"bg-indigo text-white q-px-lg"},{default:t(()=>[l(" Excess Collateral: "+o(a.bitkopaStore.selectedLoan.excessCollateral)+" "+o(a.bitkopaStore.selectedLoan.symbol),1)]),_:1})):a.step===3?(i(),p(g,{key:2,class:"bg-indigo text-white q-px-lg"},{default:t(()=>[l(" A pop will appear in your wallet ")]),_:1})):m("",!0)]),default:t(()=>[e(y,{name:1,title:"Select Loan",icon:"payments",done:a.step>1,style:{"min-height":"200px"}},{default:t(()=>[e(w,{class:"section-1"},{default:t(()=>[e(x,null,{default:t(()=>[e(q,{split:"",color:"dark",flat:"","no-caps":""},{label:t(()=>[n("div",ce,[e(S,{left:"",name:`img:tokens/${a.bitkopaStore.selectedLoan.icon}`},null,8,["name"]),n("div",me,[e(A),l(o(a.bitkopaStore.selectedLoan.loanId),1)])])]),default:t(()=>[(i(!0),f(h,null,L(a.bitkopaStore.loans.active,s=>(i(),p(v,{key:s.loanId},{default:t(()=>[Q((i(),p(k,{clickable:"",onClick:M=>a.bitkopaStore.changeSelectedLoan(s)},{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e($,{icon:`img:tokens/${s.icon}`,color:"white","text-color":"white"},null,8,["icon"])]),_:2},1024),e(r,null,{default:t(()=>[e(d,null,{default:t(()=>[l("Collateral: "+o(s.symbol),1)]),_:2},1024),e(d,{caption:""},{default:t(()=>[l("Loan Balance: "+o(s.balance)+" "+o(a.bitkopaStore.paymentMethods[s.paymentMethodId-1].symbol),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[B]])]),_:2},1024))),128))]),_:1})]),_:1}),e(x,null,{default:t(()=>[e(u,{style:{"pointer-events":"none"},icon:"details",size:"15px",flat:"",class:"text-dark q-ml-lg q-px-xl",rounded:"",color:"indigo",label:"Loan Details For Selected Loan","no-caps":""}),e(v,null,{default:t(()=>[e(k,null,{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(u,{style:{"pointer-events":"none"},icon:`img:countries/${a.bitkopaStore.paymentMethods[a.bitkopaStore.selectedLoan.paymentMethodId-1].currencyIcon}`,size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Loan Balance","no-caps":""},null,8,["icon"])]),_:1}),e(r,{side:""},{default:t(()=>[e(d,{class:"text-bold q-px-xl"},{default:t(()=>[l("Balance Remaining ")]),_:1}),e(d,{overline:"",class:"q-px-xl"},{default:t(()=>[l(o(parseInt(a.bitkopaStore.selectedLoan.balance).toLocaleString())+" "+o(a.bitkopaStore.paymentMethods[a.bitkopaStore.selectedLoan.paymentMethodId-1].symbol),1)]),_:1})]),_:1})]),_:1}),e(k,null,{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(u,{style:{"pointer-events":"none"},icon:"av_timer",size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Duration Remaining","no-caps":""})]),_:1}),e(r,{side:""},{default:t(()=>[e(d,{class:"text-bold q-px-sm"},{default:t(()=>[l("Time Remaining")]),_:1}),e(d,{overline:"",class:"q-px-sm"},{default:t(()=>[l(o(a.bitkopaStore.selectedLoan.countdown),1)]),_:1})]),_:1})]),_:1}),e(k,null,{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(u,{style:{"pointer-events":"none"},icon:`img:tokens/${a.bitkopaStore.selectedLoan.icon}`,size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Collateral Amount","no-caps":""},null,8,["icon"])]),_:1}),e(r,{side:""},{default:t(()=>[e(d,{class:"q-px-md text-bold"},{default:t(()=>[l("Collateral supplied")]),_:1}),e(d,{overline:"",class:"q-px-md"},{default:t(()=>[l(o(parseFloat(a.bitkopaStore.selectedLoan.collateralAmount/10**a.bitkopaStore.selectedLoan.decimals).toFixed(6))+" "+o(a.bitkopaStore.selectedLoan.symbol),1)]),_:1})]),_:1})]),_:1}),e(k,null,{default:t(()=>[e(r,{avatar:""},{default:t(()=>[e(u,{style:{"pointer-events":"none"},icon:"warning",size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Liquidation Risk","no-caps":""})]),_:1}),e(r,{side:""},{default:t(()=>[e(d,{class:"q-px-lg q-ml-xs text-bold"},{default:t(()=>[l("LTV")]),_:1}),e(d,{overline:"",class:"q-px-lg"},{default:t(()=>[l(o(a.bitkopaStore.selectedLoan.ltv)+"%",1)]),_:1})]),_:1}),e(r,{side:""},{default:t(()=>[e(d,{class:"text-bold q-px-xs"},{default:t(()=>[l("Liquidation Price")]),_:1}),e(d,{overline:"",class:"q-px-xs"},{default:t(()=>[l(o(a.bitkopaStore.selectedLoan.liquidationPrice)+" USD",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["done"]),e(y,{name:2,title:"Excess Collateral Amount",icon:"payments",done:a.step>2,style:{"min-height":"200px"}},{default:t(()=>[e(C,{outlined:"",modelValue:a.bitkopaStore.excessCollateralAmount,"onUpdate:modelValue":c[4]||(c[4]=s=>a.bitkopaStore.excessCollateralAmount=s),"label-color":"dark",label:"Collateral Amount","input-class":"text-dark text-bold text-h6",clearable:"","stack-label":"",dense:a.dense},{append:t(()=>[e(q,{split:"",color:"dark",style:{"pointer-events":"none"},flat:"","no-caps":""},{label:t(()=>[n("div",be,[e(S,{left:"",name:`img:tokens/${a.bitkopaStore.selectedLoan.icon}`},null,8,["name"]),n("div",ke,o(a.bitkopaStore.selectedLoan.symbol),1)])]),_:1})]),_:1},8,["modelValue","dense"])]),_:1},8,["done"]),e(y,{name:3,title:"Submit Transaction",icon:"assignment",style:{"min-height":"200px"}},{default:t(()=>[l(" Complete the transaction with your wallet. ")]),_:1})]),_:1},8,["modelValue"])])):m("",!0),a.bitkopaStore.loans.active.length?m("",!0):(i(),f("div",fe,[e(g,{"inline-actions":"",rounded:"",class:"bg-white text-dark"},{action:t(()=>[e(u,{outline:"",align:"right",color:"indigo",to:"/request",label:"Request Loan Now"})]),default:t(()=>[l(" You currently don't have any active loans. ")]),_:1})]))])]),_:1})):m("",!0)],64)}var De=R(N,[["render",ge]]);export{De as default};
