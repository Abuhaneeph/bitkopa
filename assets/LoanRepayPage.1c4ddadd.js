import{a as k,Q as V}from"./QMarkupTable.c094867a.js";import{Q as _}from"./QPage.86042b36.js";import{_ as z,a3 as P,k as R,r as D,n as i,a9 as f,p as c,q as o,ac as m,ab as v,t as l,s as e,aa as w,a6 as u,u as a,v as n,a5 as M,a4 as L,O as h,a8 as I,a0 as C,ad as $}from"./index.fec27aec.js";import{Q as q}from"./QSpace.44fdfa77.js";import{Q as b,b as r,a as d}from"./QItemLabel.144b2067.js";import{Q as x}from"./QList.cc32542e.js";import{Q as g}from"./QBtnDropdown.876500a7.js";import{Q,a as S,b as A}from"./QStepper.707f02df.js";import{Q as y}from"./touch.2b4a2049.js";import{C as F}from"./ClosePopup.02799101.js";import{u as N}from"./bitkopaStore.15472973.js";import"./selection.185e2d33.js";import"./QSlideTransition.e3eb4f2f.js";import"./use-panel.c109e320.js";import"./axios.16b9abd7.js";const T=P({setup(){const t=N();return R(()=>{t.stopListener()}),{bitkopaStore:t,step:D(1)}}}),U={class:"q-pa-xs row justify-center"},Y={class:"col-10 q-pt-xl q-mt-xl"},j={class:"q-pa-md"},E={class:"text-left",style:{width:"150px"}},O={class:"text-right"},G={class:"text-right"},H={class:"text-right"},J={class:"text-right"},K={class:"text-right"},W={class:"text-left"},X={class:"text-right"},Z={class:"text-right"},ee={class:"text-right"},te={class:"text-right"},oe={class:"text-right"},ae={class:"gt-md q-pa-xs row justify-center"},le={key:0,class:"col-12 col-md-6 q-pt-xl q-mt-xl q-px-md"},ne={class:"row items-center no-wrap"},se={class:"text-center"},ie={class:"row items-center no-wrap"},de={class:"text-center"},re={class:"row items-center no-wrap"},pe={class:"text-center"},ue={key:1,class:"col-12 col-md-6 q-pt-xl q-mt-xl q-px-md text-dark"},ce={class:"lt-lg q-pa-xs row justify-center"},me={key:0,class:"col-12 col-md-9 q-pt-md q-mt-xs q-px-md q-mb-lg"},ke={class:"row items-center no-wrap"},be={class:"text-center"},fe={class:"row items-center no-wrap"},ye={class:"text-center"},he={class:"row items-center no-wrap"},ge={class:"text-center"},Se={key:1,class:"col-12 col-md-6 q-pt-xl q-mt-xl q-px-md text-dark"};function ve(t,p,Le,qe,xe,we){return i(),f(v,null,[!t.bitkopaStore.connected||!t.bitkopaStore.verified?(i(),c(_,{key:0},{default:o(()=>[l("div",U,[l("div",Y,[l("div",j,[e(V,null,{default:o(()=>[l("thead",null,[l("tr",null,[l("th",E,[e(k,{animation:"blink",type:"text"})]),l("th",O,[e(k,{animation:"blink",type:"text"})]),l("th",G,[e(k,{animation:"blink",type:"text"})]),l("th",H,[e(k,{animation:"blink",type:"text"})]),l("th",J,[e(k,{animation:"blink",type:"text"})]),l("th",K,[e(k,{animation:"blink",type:"text"})])])]),l("tbody",null,[(i(),f(v,null,w(5,s=>l("tr",{key:s},[l("td",W,[e(k,{animation:"blink",type:"text",width:"85px"})]),l("td",X,[e(k,{animation:"blink",type:"text",width:"50px"})]),l("td",Z,[e(k,{animation:"blink",type:"text",width:"35px"})]),l("td",ee,[e(k,{animation:"blink",type:"text",width:"65px"})]),l("td",te,[e(k,{animation:"blink",type:"text",width:"25px"})]),l("td",oe,[e(k,{animation:"blink",type:"text",width:"85px"})])])),64))])]),_:1})])])])]),_:1})):m("",!0),t.bitkopaStore.connected&&t.bitkopaStore.verified?(i(),c(_,{key:1},{default:o(()=>[l("div",ae,[t.bitkopaStore.loans.active.length?(i(),f("div",le,[e(A,{modelValue:t.step,"onUpdate:modelValue":p[4]||(p[4]=s=>t.step=s),ref:"stepper",color:"primary",animated:""},{navigation:o(()=>[e(Q,null,{default:o(()=>[t.step===3&&t.bitkopaStore.repayFiatAmount>0?(i(),c(u,{key:0,onClick:t.bitkopaStore.repayLoan,color:"indigo",outline:"",label:"Pay Now"},null,8,["onClick"])):m("",!0),t.step===1||t.step===2&&t.bitkopaStore.repayFiatAmount>0?(i(),c(u,{key:1,onClick:p[2]||(p[2]=s=>t.$refs.stepper.next()),color:"indigo",outline:"",label:"Continue"})):m("",!0),t.step>1?(i(),c(u,{key:2,flat:"",color:"secondary",onClick:p[3]||(p[3]=s=>t.$refs.stepper.previous()),label:"Back",class:"q-ml-sm"})):m("",!0)]),_:1})]),message:o(()=>[t.step===1?(i(),c(y,{key:0,class:"bg-indigo text-white q-px-lg"},{default:o(()=>[a(" Managing Active Loan: "+n(t.bitkopaStore.selectedLoan.loanId),1)]),_:1})):t.step===2?(i(),c(y,{key:1,class:"bg-indigo text-white q-px-lg"},{default:o(()=>[a(" Total Loan Balance: "+n(parseFloat(t.bitkopaStore.selectedLoan.balance).toLocaleString())+" "+n(t.bitkopaStore.paymentMethods[t.bitkopaStore.selectedLoan.paymentMethodId-1].symbol),1)]),_:1})):t.step===3?(i(),c(y,{key:2,class:"bg-indigo text-white q-px-lg"},{default:o(()=>[a(" You will receive a prompt to complete the payment. ")]),_:1})):m("",!0)]),default:o(()=>[e(S,{name:1,title:"Select Loan",icon:"payments",done:t.step>1,style:{"min-height":"200px"}},{default:o(()=>[e(M,{class:"section-1"},{default:o(()=>[e(L,null,{default:o(()=>[e(g,{split:"",color:"dark",flat:"","no-caps":""},{label:o(()=>[l("div",ne,[e(h,{left:"",name:`img:tokens/${t.bitkopaStore.selectedLoan.icon}`},null,8,["name"]),l("div",se,[e(q),a(n(t.bitkopaStore.selectedLoan.loanId),1)])])]),default:o(()=>[(i(!0),f(v,null,w(t.bitkopaStore.loans.active,s=>(i(),c(x,{key:s.loanId},{default:o(()=>[C((i(),c(b,{clickable:"",onClick:B=>t.bitkopaStore.changeSelectedLoan(s)},{default:o(()=>[e(r,{avatar:""},{default:o(()=>[e($,{icon:`img:tokens/${s.icon}`,color:"white","text-color":"white"},null,8,["icon"])]),_:2},1024),e(r,null,{default:o(()=>[e(d,null,{default:o(()=>[a("Collateral: "+n(s.symbol),1)]),_:2},1024),e(d,{caption:""},{default:o(()=>[a("Loan Balance: "+n(s.balance)+" "+n(t.bitkopaStore.paymentMethods[s.paymentMethodId-1].symbol),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[F]])]),_:2},1024))),128))]),_:1})]),_:1}),e(L,null,{default:o(()=>[e(u,{style:{"pointer-events":"none"},icon:"details",size:"15px",flat:"",class:"text-dark q-ml-lg q-px-xl",rounded:"",color:"indigo",label:"Loan Details For Selected Loan","no-caps":""}),e(x,null,{default:o(()=>[e(b,null,{default:o(()=>[e(r,{avatar:""},{default:o(()=>[e(u,{style:{"pointer-events":"none"},icon:`img:countries/${t.bitkopaStore.paymentMethods[t.bitkopaStore.selectedLoan.paymentMethodId-1].currencyIcon}`,size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Loan Balance","no-caps":""},null,8,["icon"])]),_:1}),e(r,{side:""},{default:o(()=>[e(d,{class:"text-bold q-px-xl"},{default:o(()=>[a("Balance Remaining ")]),_:1}),e(d,{overline:"",class:"q-px-xl"},{default:o(()=>[a(n(parseInt(t.bitkopaStore.selectedLoan.balance).toLocaleString())+" "+n(t.bitkopaStore.paymentMethods[t.bitkopaStore.selectedLoan.paymentMethodId-1].symbol),1)]),_:1})]),_:1})]),_:1}),e(b,null,{default:o(()=>[e(r,{avatar:""},{default:o(()=>[e(u,{style:{"pointer-events":"none"},icon:"av_timer",size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Duration Remaining","no-caps":""})]),_:1}),e(r,{side:""},{default:o(()=>[e(d,{class:"text-bold q-px-sm"},{default:o(()=>[a("Time Remaining")]),_:1}),e(d,{overline:"",class:"q-px-sm"},{default:o(()=>[a(n(t.bitkopaStore.selectedLoan.countdown),1)]),_:1})]),_:1})]),_:1}),e(b,null,{default:o(()=>[e(r,{avatar:""},{default:o(()=>[e(u,{style:{"pointer-events":"none"},icon:`img:tokens/${t.bitkopaStore.selectedLoan.icon}`,size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Collateral Amount","no-caps":""},null,8,["icon"])]),_:1}),e(r,{side:""},{default:o(()=>[e(d,{class:"q-px-md text-bold"},{default:o(()=>[a("Collateral supplied")]),_:1}),e(d,{overline:"",class:"q-px-md"},{default:o(()=>[a(n(parseFloat(t.bitkopaStore.selectedLoan.collateralAmount/10**t.bitkopaStore.selectedLoan.decimals).toFixed(6))+" "+n(t.bitkopaStore.selectedLoan.symbol),1)]),_:1})]),_:1})]),_:1}),e(b,null,{default:o(()=>[e(r,{avatar:""},{default:o(()=>[e(u,{style:{"pointer-events":"none"},icon:"warning",size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Liquidation Risk","no-caps":""})]),_:1}),e(r,{side:""},{default:o(()=>[e(d,{class:"q-px-lg q-ml-xs text-bold"},{default:o(()=>[a("LTV")]),_:1}),e(d,{overline:"",class:"q-px-lg"},{default:o(()=>[a(n(t.bitkopaStore.selectedLoan.ltv)+"%",1)]),_:1})]),_:1}),e(r,{side:""},{default:o(()=>[e(d,{class:"text-bold q-px-xs"},{default:o(()=>[a("Liquidation Price")]),_:1}),e(d,{overline:"",class:"q-px-xs"},{default:o(()=>[a(n(t.bitkopaStore.selectedLoan.liquidationPrice)+" USD",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["done"]),e(S,{name:2,title:"Amount and Payment Method",icon:"payments",done:t.step>2,style:{"min-height":"200px"}},{default:o(()=>[e(I,{outlined:"",modelValue:t.bitkopaStore.repayFiatAmount,"onUpdate:modelValue":p[1]||(p[1]=s=>t.bitkopaStore.repayFiatAmount=s),"label-color":"dark",label:"Amount ","input-class":"text-dark text-bold text-h6",clearable:"","stack-label":"",dense:t.dense},{append:o(()=>[e(u,{outline:"",rounded:"","no-caps":"",color:"indigo",label:"Max",size:"10px",onClick:p[0]||(p[0]=s=>t.bitkopaStore.repayFiatAmount=t.bitkopaStore.selectedLoan.balance)}),e(g,{split:"",color:"dark",style:{"pointer-events":"none"},flat:"","no-caps":""},{label:o(()=>[l("div",ie,[e(h,{left:"",name:`img:countries/${t.bitkopaStore.paymentMethods[t.bitkopaStore.selectedLoan.paymentMethodId-1].currencyIcon}`},null,8,["name"]),l("div",de,n(t.bitkopaStore.paymentMethods[t.bitkopaStore.selectedLoan.paymentMethodId-1].symbol),1)])]),_:1}),e(g,{split:"",color:"dark",style:{"pointer-events":"none"},flat:"","no-caps":""},{label:o(()=>[l("div",re,[e(h,{left:"",name:`img:payments/${t.bitkopaStore.paymentMethods[t.bitkopaStore.selectedLoan.paymentMethodId-1].icon}`},null,8,["name"]),l("div",pe,[e(q),a(n(t.bitkopaStore.paymentMethods[t.bitkopaStore.selectedLoan.paymentMethodId-1].name),1)])])]),_:1})]),_:1},8,["modelValue","dense"])]),_:1},8,["done"]),e(S,{name:3,title:"Confirm",icon:"assignment",style:{"min-height":"200px"}},{default:o(()=>[a(" Make sure your phone is unlocked and you have sufficient funds. ")]),_:1})]),_:1},8,["modelValue"])])):m("",!0),t.bitkopaStore.loans.active.length?m("",!0):(i(),f("div",ue,[e(y,{"inline-actions":"",rounded:""},{action:o(()=>[e(u,{outline:"",align:"right",color:"indigo",to:"/request",label:"Request Loan Now"})]),default:o(()=>[a(" You currently don't have any active loans. ")]),_:1})]))]),l("div",ce,[t.bitkopaStore.loans.active.length?(i(),f("div",me,[e(A,{modelValue:t.step,"onUpdate:modelValue":p[9]||(p[9]=s=>t.step=s),ref:"stepper",color:"primary",animated:""},{navigation:o(()=>[e(Q,null,{default:o(()=>[t.step===3&&t.bitkopaStore.repayFiatAmount>0?(i(),c(u,{key:0,onClick:t.bitkopaStore.repayLoan,color:"indigo",outline:"",label:"Pay Now"},null,8,["onClick"])):m("",!0),t.step===1||t.step===2&&t.bitkopaStore.repayFiatAmount>0?(i(),c(u,{key:1,onClick:p[7]||(p[7]=s=>t.$refs.stepper.next()),color:"indigo",outline:"",label:"Continue"})):m("",!0),t.step>1?(i(),c(u,{key:2,flat:"",color:"secondary",onClick:p[8]||(p[8]=s=>t.$refs.stepper.previous()),label:"Back",class:"q-ml-sm"})):m("",!0)]),_:1})]),message:o(()=>[t.step===1?(i(),c(y,{key:0,class:"bg-indigo text-white q-px-lg"},{default:o(()=>[a(" Managing Active Loan: "+n(t.bitkopaStore.selectedLoan.loanId),1)]),_:1})):t.step===2?(i(),c(y,{key:1,class:"bg-indigo text-white q-px-lg"},{default:o(()=>[a(" Total Loan Balance: "+n(parseFloat(t.bitkopaStore.selectedLoan.balance).toLocaleString())+" "+n(t.bitkopaStore.paymentMethods[t.bitkopaStore.selectedLoan.paymentMethodId-1].symbol),1)]),_:1})):t.step===3?(i(),c(y,{key:2,class:"bg-indigo text-white q-px-lg"},{default:o(()=>[a(" You will receive a prompt to complete the payment. ")]),_:1})):m("",!0)]),default:o(()=>[e(S,{name:1,title:"Select Loan",icon:"payments",done:t.step>1,style:{"min-height":"200px"}},{default:o(()=>[e(M,{class:"section-1"},{default:o(()=>[e(L,null,{default:o(()=>[e(g,{split:"",color:"dark",flat:"","no-caps":""},{label:o(()=>[l("div",ke,[e(h,{left:"",name:`img:tokens/${t.bitkopaStore.selectedLoan.icon}`},null,8,["name"]),l("div",be,[e(q),a(n(t.bitkopaStore.selectedLoan.loanId),1)])])]),default:o(()=>[(i(!0),f(v,null,w(t.bitkopaStore.loans.active,s=>(i(),c(x,{key:s.loanId},{default:o(()=>[C((i(),c(b,{clickable:"",onClick:B=>t.bitkopaStore.changeSelectedLoan(s)},{default:o(()=>[e(r,{avatar:""},{default:o(()=>[e($,{icon:`img:tokens/${s.icon}`,color:"white","text-color":"white"},null,8,["icon"])]),_:2},1024),e(r,null,{default:o(()=>[e(d,null,{default:o(()=>[a("Collateral: "+n(s.symbol),1)]),_:2},1024),e(d,{caption:""},{default:o(()=>[a("Loan Balance: "+n(s.balance)+" "+n(t.bitkopaStore.paymentMethods[s.paymentMethodId-1].symbol),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[F]])]),_:2},1024))),128))]),_:1})]),_:1}),e(L,null,{default:o(()=>[e(u,{style:{"pointer-events":"none"},icon:"details",size:"15px",flat:"",class:"text-dark q-ml-lg q-px-xl",rounded:"",color:"indigo",label:"Loan Details For Selected Loan","no-caps":""}),e(x,null,{default:o(()=>[e(b,null,{default:o(()=>[e(r,{avatar:""},{default:o(()=>[e(u,{style:{"pointer-events":"none"},icon:`img:countries/${t.bitkopaStore.paymentMethods[t.bitkopaStore.selectedLoan.paymentMethodId-1].currencyIcon}`,size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Loan Balance","no-caps":""},null,8,["icon"])]),_:1}),e(r,{side:""},{default:o(()=>[e(d,{class:"text-bold q-px-xl"},{default:o(()=>[a("Balance Remaining ")]),_:1}),e(d,{overline:"",class:"q-px-xl"},{default:o(()=>[a(n(parseInt(t.bitkopaStore.selectedLoan.balance).toLocaleString())+" "+n(t.bitkopaStore.paymentMethods[t.bitkopaStore.selectedLoan.paymentMethodId-1].symbol),1)]),_:1})]),_:1})]),_:1}),e(b,null,{default:o(()=>[e(r,{avatar:""},{default:o(()=>[e(u,{style:{"pointer-events":"none"},icon:"av_timer",size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Duration Remaining","no-caps":""})]),_:1}),e(r,{side:""},{default:o(()=>[e(d,{class:"text-bold q-px-sm"},{default:o(()=>[a("Time Remaining")]),_:1}),e(d,{overline:"",class:"q-px-sm"},{default:o(()=>[a(n(t.bitkopaStore.selectedLoan.countdown),1)]),_:1})]),_:1})]),_:1}),e(b,null,{default:o(()=>[e(r,{avatar:""},{default:o(()=>[e(u,{style:{"pointer-events":"none"},icon:`img:tokens/${t.bitkopaStore.selectedLoan.icon}`,size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Collateral Amount","no-caps":""},null,8,["icon"])]),_:1}),e(r,{side:""},{default:o(()=>[e(d,{class:"q-px-md text-bold"},{default:o(()=>[a("Collateral supplied")]),_:1}),e(d,{overline:"",class:"q-px-md"},{default:o(()=>[a(n(parseFloat(t.bitkopaStore.selectedLoan.collateralAmount/10**t.bitkopaStore.selectedLoan.decimals).toFixed(6))+" "+n(t.bitkopaStore.selectedLoan.symbol),1)]),_:1})]),_:1})]),_:1}),e(b,null,{default:o(()=>[e(r,{avatar:""},{default:o(()=>[e(u,{style:{"pointer-events":"none"},icon:"warning",size:"15px",flat:"",class:"text-dark q-mr-xs",rounded:"",color:"indigo",label:"Liquidation Risk","no-caps":""})]),_:1}),e(r,{side:""},{default:o(()=>[e(d,{class:"q-px-lg q-ml-xs text-bold"},{default:o(()=>[a("LTV")]),_:1}),e(d,{overline:"",class:"q-px-lg"},{default:o(()=>[a(n(t.bitkopaStore.selectedLoan.ltv)+"%",1)]),_:1})]),_:1}),e(r,{side:""},{default:o(()=>[e(d,{class:"text-bold q-px-xs"},{default:o(()=>[a("Liquidation Price")]),_:1}),e(d,{overline:"",class:"q-px-xs"},{default:o(()=>[a(n(t.bitkopaStore.selectedLoan.liquidationPrice)+" USD",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["done"]),e(S,{name:2,title:"Amount and Payment Method",icon:"payments",done:t.step>2,style:{"min-height":"200px"}},{default:o(()=>[e(I,{outlined:"",modelValue:t.bitkopaStore.repayFiatAmount,"onUpdate:modelValue":p[6]||(p[6]=s=>t.bitkopaStore.repayFiatAmount=s),"label-color":"dark",label:"Amount ","input-class":"text-dark text-bold text-h6",clearable:"","stack-label":"",dense:t.dense},{append:o(()=>[e(u,{outline:"",rounded:"","no-caps":"",color:"indigo",label:"Max",size:"10px",onClick:p[5]||(p[5]=s=>t.bitkopaStore.repayFiatAmount=t.bitkopaStore.selectedLoan.balance)}),e(g,{split:"",color:"dark",style:{"pointer-events":"none"},flat:"","no-caps":""},{label:o(()=>[l("div",fe,[e(h,{left:"",name:`img:countries/${t.bitkopaStore.paymentMethods[t.bitkopaStore.selectedLoan.paymentMethodId-1].currencyIcon}`},null,8,["name"]),l("div",ye,n(t.bitkopaStore.paymentMethods[t.bitkopaStore.selectedLoan.paymentMethodId-1].symbol),1)])]),_:1}),e(g,{split:"",color:"dark",style:{"pointer-events":"none"},flat:"","no-caps":""},{label:o(()=>[l("div",he,[e(h,{left:"",name:`img:payments/${t.bitkopaStore.paymentMethods[t.bitkopaStore.selectedLoan.paymentMethodId-1].icon}`},null,8,["name"]),l("div",ge,[e(q),a(n(t.bitkopaStore.paymentMethods[t.bitkopaStore.selectedLoan.paymentMethodId-1].name),1)])])]),_:1})]),_:1},8,["modelValue","dense"])]),_:1},8,["done"]),e(S,{name:3,title:"Confirm",icon:"assignment",style:{"min-height":"200px"}},{default:o(()=>[a(" Make sure your phone is unlocked and you have sufficient funds. ")]),_:1})]),_:1},8,["modelValue"])])):m("",!0),t.bitkopaStore.loans.active.length?m("",!0):(i(),f("div",Se,[e(y,{"inline-actions":"",rounded:""},{action:o(()=>[e(u,{outline:"",align:"right",color:"indigo",to:"/request",label:"Request Loan Now"})]),default:o(()=>[a(" You currently don't have any active loans. ")]),_:1})]))])]),_:1})):m("",!0)],64)}var Te=z(T,[["render",ve]]);export{Te as default};
